package kr.or.ddit.basic.reqNresp;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/requestTest01.do")
public class RequestTest01 extends HttpServlet {
   private static final long serialVersionUID = 1L;

   protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
   
	   //POST 방식으로 전달되는 문자 인코딩 방식 설정
	   request.setCharacterEncoding("utf-8");
	   
      // 클라이언트가 요청할 때 보낸 데이터를 받아서 처리해 보자
      // 이 때 받아온 데이터는 기본적으로 문자열이다.
      
      /* 1. getParameter("파라미터명") 
       * ==> form태그 안의 태그들의 속성 name = ' ' 이 파라미터명이다. 모든 태그가 아니라, 입력이 가능한 태그들, input, button 등이 적용 
       * - 해당 '파라미터명'에 설정되어 온 '값'을 가져온다.
       * - 이 때 설정하는 '파라미터명'은 보통 form태그 안에 만들어진 태그의 name속성 값을 지정한다.
       * - 같은 '파라미터명'이 1개일 경우에 사용한다.
       */
      
      String userName = request.getParameter("username"); // jsp에 있는 파라미터명 대소문자를 다 맞춰야한다.
      String job = request.getParameter("job");
      
      
      //2. getParameterValues("파라미터") ==> '파라미터명'이 같은 것이 여러 개일 경우에 사용한다.
      //		==> 가져오는 '값'의 자료형은 'String []' 이다.
      
      //getParameterValue()메서드를 이용해서 name속성이 'hobby'인 체크박스 값들 읽어오기
      String[] hobbies = request.getParameterValues("hobby");
      
      
      
      response.setCharacterEncoding("UTF-8");
      response.setContentType("text/html; charset=UTF-8");
      
      PrintWriter out = response.getWriter();
      out.println("<html> <head> <meta charset = 'UTF-8'>");
      out.println("<title> Request객체 연습 </title> </head>");
      out.println("<body> <h2> Request객체 테스트 결과 </h2>");
      out.println("<hr>");
      out.println("<table border = '1'> ");
      out.println("<tr> <td> 이 름  </td>");
      out.println("<td> " + userName + "</td></tr>");
      
      out.println("<tr> <td> 직 업  </td>");
      out.println("<td> " + job + "</td></tr>");
      
      
      out.println("<tr> <td> 취 미  </td>");
      out.println("<td> " + job + "</td></tr>");
      
      //반복문을 사용해서 배열 데이터를 처리한다.
      for(int i=0; i<hobbies.length; i++) {
    	  out.println(hobbies[i] + "<br>");
      }
      out.println("</td></tr>");
      
      out.println("</table>");
      
      out.println("</body> </html>");
      
      
   }

   protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
      doGet(request, response);
   }

}